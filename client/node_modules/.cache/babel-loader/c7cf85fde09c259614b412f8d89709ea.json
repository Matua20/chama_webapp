{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=_ref=>{let{userId}=_ref;const[user,setUser]=useState(null);useEffect(()=>{axios.get(\"/api/users/\".concat(userId)).then(response=>setUser(response.data)).catch(error=>console.error(error));},[userId]);const handleConfirmGift=async giftId=>{try{const response=await axios.post(\"/api/users/\".concat(userId,\"/confirm-gift\"),{giftId});setUser(response.data);}catch(error){console.error('Error confirming gift:',error);}};if(!user)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Welcome, \",user.firstName,\" \",user.lastName]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Level: \",user.level]}),/*#__PURE__*/_jsx(\"h4\",{children:\"Referrals:\"}),/*#__PURE__*/_jsx(\"ul\",{children:user.referrals.map(referral=>/*#__PURE__*/_jsxs(\"li\",{children:[referral.firstName,\" \",referral.lastName,\" - \",referral.phoneNumber]},referral._id))}),/*#__PURE__*/_jsx(\"h4\",{children:\"Gifted Users:\"}),/*#__PURE__*/_jsx(\"ul\",{children:user.giftedUsers.map(giftedUser=>/*#__PURE__*/_jsxs(\"li\",{children:[giftedUser.firstName,\" \",giftedUser.lastName,\" - \",giftedUser.phoneNumber]},giftedUser._id))}),/*#__PURE__*/_jsx(\"h4\",{children:\"Received Gifts:\"}),/*#__PURE__*/_jsx(\"ul\",{children:user.gifts.map(gift=>/*#__PURE__*/_jsxs(\"li\",{children:[\"Amount: \",gift.amount,\" - Date: \",new Date(gift.date).toLocaleDateString(),!gift.confirmed&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleConfirmGift(gift._id),children:\"Confirm Receipt\"})]},gift._id))})]});};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Dashboard","_ref","userId","user","setUser","get","concat","then","response","data","catch","error","console","handleConfirmGift","giftId","post","children","className","firstName","lastName","level","referrals","map","referral","phoneNumber","_id","giftedUsers","giftedUser","gifts","gift","amount","Date","date","toLocaleDateString","confirmed","onClick"],"sources":["C:/Users/user/Desktop/chama-webapp/client/src/components/Dashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Dashboard = ({ userId }) => {\r\n  const [user, setUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    axios.get(`/api/users/${userId}`)\r\n      .then(response => setUser(response.data))\r\n      .catch(error => console.error(error));\r\n  }, [userId]);\r\n\r\n  const handleConfirmGift = async (giftId) => {\r\n    try {\r\n      const response = await axios.post(`/api/users/${userId}/confirm-gift`, { giftId });\r\n      setUser(response.data);\r\n    } catch (error) {\r\n      console.error('Error confirming gift:', error);\r\n    }\r\n  };\r\n\r\n  if (!user) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div className=\"dashboard\">\r\n      <h3>Welcome, {user.firstName} {user.lastName}</h3>\r\n      <p>Level: {user.level}</p>\r\n      <h4>Referrals:</h4>\r\n      <ul>\r\n        {user.referrals.map((referral) => (\r\n          <li key={referral._id}>\r\n            {referral.firstName} {referral.lastName} - {referral.phoneNumber}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      <h4>Gifted Users:</h4>\r\n      <ul>\r\n        {user.giftedUsers.map((giftedUser) => (\r\n          <li key={giftedUser._id}>\r\n            {giftedUser.firstName} {giftedUser.lastName} - {giftedUser.phoneNumber}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      <h4>Received Gifts:</h4>\r\n      <ul>\r\n        {user.gifts.map((gift) => (\r\n          <li key={gift._id}>\r\n            Amount: {gift.amount} - Date: {new Date(gift.date).toLocaleDateString()}\r\n            {!gift.confirmed && <button onClick={() => handleConfirmGift(gift._id)}>Confirm Receipt</button>}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}